{% load render_table from django_tables2 %}

<table class="table table-striped">
    <tr>
        {% with field_name='pk' %}{% with text_name='#' %}
            {% include 'sort_line.html' %}
        {% endwith %}{% endwith %}
            {% with field_name='doc_ID' %}{% with text_name='id' %}
            {% include 'sort_line.html' %}
        {% endwith %}{% endwith %}
                {% with field_name='title' %}{% with text_name='Title' %}
            {% include 'sort_line.html' %}
        {% endwith %}{% endwith %}
                {% with field_name='year' %}{% with text_name='Year' %}
            {% include 'sort_line.html' %}
        {% endwith %}{% endwith %}
        <th><a href="?order={{ request.GET.order }}&reversed={{ request.GET.reversed }}">Tags</a></th>
        <th>Options</th>
    </tr>
{% for item in data %}
    <tr  data-toggle="collapse" data-target="#collapse{{ item.pk }}"><td>{{ item.pk }}</td><td>{{ item.my_ID }}</td><td>{{ item.title }}</td><td>{{ item.year }}</td><td>{% for tag in item.tags.all %}<a href="?tag={{ tag.name }}&order={{ request.GET.order }}&reversed={{ request.GET.reversed }}"<div class="badge btn-primary">{{ tag }}</div>{% endfor %}</td><td>{{ item.render_item_options }}</td></tr>
    <tr class="collapse out" id="collapse{{ item.pk }}fake"></tr>
    <tr class="collapse out" id="collapse{{ item.pk }}"><td colspan="5"><div class="card">{{ item.render_authors }}<br>{{ item.render_summary|safe}}</div></td></tr>
{% endfor %}
</table>